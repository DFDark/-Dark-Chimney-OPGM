<?php	class Player extends DatabaseObject	{		public $table	= "players";				public function __construct()		{			parent::__construct();						$arg_num = func_num_args();			if ($arg_num == 2)				$this->Login( func_get_arg(0), func_get_arg(1) );		}				/**		* Login		*/		public function Login( $email, $password )		{			$email = htmlspecialchars( $email );			$email = addslashes( $email );						//:: Email invalid			if ( !filter_var( $email, FILTER_VALIDATE_EMAIL ) )				throw new Exception("Invalid email");			$database	= Database::Get();			$sql		= $database->prepare( "SELECT * FROM `{$this->table}` WHERE `name` = ?" );			$sql->bind_param( "s", $email );			if ( $sql->execute() === false )				throw new Exception("execution error");						$row;			$result = $sql->get_result();			if ( $database->affected_rows != 1 )				throw new Exception("user invalid");						if ( $row = $result->fetch_assoc() )			{				foreach ( $row as $column_name => $column_value )					$this->data[$column_name] = $column_value;			}			$result->free();			$sql->close();						$crypter	= new Bcrypt();			if ( !$crypter->verify( $password, $this->data['pass'] ) )				throw new Exception("Bad password");		}				public function CreatePasswordHash( $password )		{			$encryptor = new Bcrypt();			$this->data['password'] = $encryptor->hash( $password );		}	}?>